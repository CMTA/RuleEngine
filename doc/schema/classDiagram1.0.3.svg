<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 5.0.0 (20220707.1540)
 -->
<!-- Title: UmlClassDiagram Pages: 1 -->
<svg width="1525pt" height="828pt"
 viewBox="0.00 0.00 1524.71 827.80" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 823.8)">
<title>UmlClassDiagram</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-823.8 1520.71,-823.8 1520.71,4 -4,4"/>
<!-- 0 -->
<g id="node1" class="node">
<title>0</title>
<polygon fill="#f2f2f2" stroke="black" points="502.36,-0.5 502.36,-478.1 984.14,-478.1 984.14,-0.5 502.36,-0.5"/>
<text text-anchor="middle" x="743.25" y="-461.5" font-family="Times,serif" font-size="14.00">RuleEngine</text>
<text text-anchor="middle" x="743.25" y="-444.7" font-family="Times,serif" font-size="14.00">src/RuleEngine.sol</text>
<polyline fill="none" stroke="black" points="502.36,-436.5 984.14,-436.5 "/>
<text text-anchor="start" x="510.36" y="-419.9" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="510.36" y="-403.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;_rules: IRule[]</text>
<text text-anchor="start" x="510.36" y="-386.3" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="510.36" y="-369.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;RULE_ENGINE_ROLE: bytes32</text>
<text text-anchor="start" x="510.36" y="-352.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;_ruleIsPresent: mapping(IRule=&gt;bool)</text>
<polyline fill="none" stroke="black" points="502.36,-344.5 984.14,-344.5 "/>
<text text-anchor="start" x="510.36" y="-327.9" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="510.36" y="-311.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_msgSender(): (sender: address)</text>
<text text-anchor="start" x="510.36" y="-294.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_msgData(): bytes</text>
<text text-anchor="start" x="510.36" y="-277.5" font-family="Times,serif" font-size="14.00">External:</text>
<text text-anchor="start" x="510.36" y="-260.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;setRules(rules_: IRule[]) &lt;&lt;onlyRole&gt;&gt;</text>
<text text-anchor="start" x="510.36" y="-243.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;rulesCount(): uint256</text>
<text text-anchor="start" x="510.36" y="-227.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getRuleIndex(rule_: IRule): (index: uint256)</text>
<text text-anchor="start" x="510.36" y="-210.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;rule(ruleId: uint256): IRule</text>
<text text-anchor="start" x="510.36" y="-193.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;rules(): IRule[]</text>
<text text-anchor="start" x="510.36" y="-176.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;messageForTransferRestriction(_restrictionCode: uint8): string</text>
<text text-anchor="start" x="510.36" y="-159.9" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="510.36" y="-143.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; AddRule(rule: IRule)</text>
<text text-anchor="start" x="510.36" y="-126.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; RemoveRule(rule: IRule)</text>
<text text-anchor="start" x="510.36" y="-109.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;event&gt;&gt; ClearRules(rulesRemoved: IRule[])</text>
<text text-anchor="start" x="510.36" y="-92.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;constructor(admin: address, forwarderIrrevocable: address)</text>
<text text-anchor="start" x="510.36" y="-75.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;clearRules() &lt;&lt;onlyRole&gt;&gt;</text>
<text text-anchor="start" x="510.36" y="-59.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;addRule(rule_: IRule) &lt;&lt;onlyRole&gt;&gt;</text>
<text text-anchor="start" x="510.36" y="-42.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;removeRule(rule_: IRule, index: uint256) &lt;&lt;onlyRole&gt;&gt;</text>
<text text-anchor="start" x="510.36" y="-25.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;detectTransferRestriction(_from: address, _to: address, _amount: uint256): uint8</text>
<text text-anchor="start" x="510.36" y="-8.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;validateTransfer(_from: address, _to: address, _amount: uint256): bool</text>
</g>
<!-- 1 -->
<g id="node2" class="node">
<title>1</title>
<polygon fill="#f2f2f2" stroke="black" points="614.52,-523.5 614.52,-673.9 871.98,-673.9 871.98,-523.5 614.52,-523.5"/>
<text text-anchor="middle" x="743.25" y="-657.3" font-family="Times,serif" font-size="14.00">&lt;&lt;Abstract&gt;&gt;</text>
<text text-anchor="middle" x="743.25" y="-640.5" font-family="Times,serif" font-size="14.00">MetaTxModuleStandalone</text>
<text text-anchor="middle" x="743.25" y="-623.7" font-family="Times,serif" font-size="14.00">src/modules/MetaTxModuleStandalone.sol</text>
<polyline fill="none" stroke="black" points="614.52,-615.5 871.98,-615.5 "/>
<text text-anchor="start" x="622.52" y="-598.9" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="622.52" y="-582.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_msgSender(): (sender: address)</text>
<text text-anchor="start" x="622.52" y="-565.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_msgData(): bytes</text>
<text text-anchor="start" x="622.52" y="-548.5" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="622.52" y="-531.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;constructor(trustedForwarder: address)</text>
</g>
<!-- 0&#45;&gt;1 -->
<g id="edge1" class="edge">
<title>0&#45;&gt;1</title>
<path fill="none" stroke="black" d="M743.25,-478.19C743.25,-483.3 743.25,-488.33 743.25,-493.27"/>
<polygon fill="none" stroke="black" points="732.75,-493.28 743.25,-523.28 753.75,-493.28 732.75,-493.28"/>
</g>
<!-- 2 -->
<g id="node3" class="node">
<title>2</title>
<polygon fill="#f2f2f2" stroke="black" points="22.8,-548.7 22.8,-648.7 243.7,-648.7 243.7,-548.7 22.8,-548.7"/>
<text text-anchor="middle" x="133.25" y="-632.1" font-family="Times,serif" font-size="14.00">&lt;&lt;Interface&gt;&gt;</text>
<text text-anchor="middle" x="133.25" y="-615.3" font-family="Times,serif" font-size="14.00">SanctionsList</text>
<text text-anchor="middle" x="133.25" y="-598.5" font-family="Times,serif" font-size="14.00">src/rules/RuleSanctionList.sol</text>
<polyline fill="none" stroke="black" points="22.8,-590.3 243.7,-590.3 "/>
<text text-anchor="start" x="30.8" y="-573.7" font-family="Times,serif" font-size="14.00">External:</text>
<text text-anchor="start" x="30.8" y="-556.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&#160;isSanctioned(addr: address): bool</text>
</g>
<!-- 3 -->
<g id="node4" class="node">
<title>3</title>
<polygon fill="#f2f2f2" stroke="black" points="0,-101.3 0,-377.3 484.5,-377.3 484.5,-101.3 0,-101.3"/>
<text text-anchor="middle" x="242.25" y="-360.7" font-family="Times,serif" font-size="14.00">RuleSanctionList</text>
<text text-anchor="middle" x="242.25" y="-343.9" font-family="Times,serif" font-size="14.00">src/rules/RuleSanctionList.sol</text>
<polyline fill="none" stroke="black" points="0,-335.7 484.5,-335.7 "/>
<text text-anchor="start" x="8" y="-319.1" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="8" y="-302.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;sanctionsList: SanctionsList</text>
<polyline fill="none" stroke="black" points="0,-294.1 484.5,-294.1 "/>
<text text-anchor="start" x="8" y="-277.5" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="8" y="-260.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_msgSender(): (sender: address)</text>
<text text-anchor="start" x="8" y="-243.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_msgData(): bytes</text>
<text text-anchor="start" x="8" y="-227.1" font-family="Times,serif" font-size="14.00">External:</text>
<text text-anchor="start" x="8" y="-210.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;canReturnTransferRestrictionCode(_restrictionCode: uint8): bool</text>
<text text-anchor="start" x="8" y="-193.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;messageForTransferRestriction(_restrictionCode: uint8): string</text>
<text text-anchor="start" x="8" y="-176.7" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="8" y="-159.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;constructor(admin: address, forwarderIrrevocable: address)</text>
<text text-anchor="start" x="8" y="-143.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;setSanctionListOracle(sanctionContractOracle_: address) &lt;&lt;onlyRole&gt;&gt;</text>
<text text-anchor="start" x="8" y="-126.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;validateTransfer(_from: address, _to: address, _amount: uint256): (isValid: bool)</text>
<text text-anchor="start" x="8" y="-109.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;detectTransferRestriction(_from: address, _to: address, uint256): uint8</text>
</g>
<!-- 3&#45;&gt;1 -->
<g id="edge2" class="edge">
<title>3&#45;&gt;1</title>
<path fill="none" stroke="black" d="M364.61,-377.4C402.9,-414.21 447.25,-451.32 493.25,-478.6 531.2,-501.1 550.95,-495.86 595.89,-512.01"/>
<polygon fill="none" stroke="black" points="591.98,-521.76 623.72,-523.5 599.99,-502.35 591.98,-521.76"/>
</g>
<!-- 3&#45;&gt;2 -->
<g id="edge4" class="edge">
<title>3&#45;&gt;2</title>
<path fill="none" stroke="black" d="M200.42,-377.46C183.34,-433.46 164.5,-495.22 151.14,-539.06"/>
<polygon fill="black" stroke="black" points="147.77,-538.1 148.2,-548.68 154.46,-540.14 147.77,-538.1"/>
</g>
<!-- 6 -->
<g id="node7" class="node">
<title>6</title>
<polygon fill="#f2f2f2" stroke="black" points="261.8,-515.1 261.8,-682.3 596.71,-682.3 596.71,-515.1 261.8,-515.1"/>
<text text-anchor="middle" x="429.25" y="-665.7" font-family="Times,serif" font-size="14.00">&lt;&lt;Abstract&gt;&gt;</text>
<text text-anchor="middle" x="429.25" y="-648.9" font-family="Times,serif" font-size="14.00">RuleSanctionlistInvariantStorage</text>
<text text-anchor="middle" x="429.25" y="-632.1" font-family="Times,serif" font-size="14.00">src/rules/abstract/RuleSanctionListInvariantStorage.sol</text>
<polyline fill="none" stroke="black" points="261.8,-623.9 596.71,-623.9 "/>
<text text-anchor="start" x="269.8" y="-607.3" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="269.8" y="-590.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;SANCTIONLIST_ROLE: bytes32</text>
<text text-anchor="start" x="269.8" y="-573.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;TEXT_ADDRESS_FROM_IS_SANCTIONED: string</text>
<text text-anchor="start" x="269.8" y="-556.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;TEXT_ADDRESS_TO_IS_SANCTIONED: string</text>
<text text-anchor="start" x="269.8" y="-540.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;CODE_ADDRESS_FROM_IS_SANCTIONED: uint8</text>
<text text-anchor="start" x="269.8" y="-523.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;CODE_ADDRESS_TO_IS_SANCTIONED: uint8</text>
</g>
<!-- 3&#45;&gt;6 -->
<g id="edge3" class="edge">
<title>3&#45;&gt;6</title>
<path fill="none" stroke="black" d="M314.01,-377.46C333.2,-414.13 353.68,-453.27 371.97,-488.23"/>
<polygon fill="none" stroke="black" points="362.74,-493.23 385.95,-514.94 381.34,-483.49 362.74,-493.23"/>
</g>
<!-- 4 -->
<g id="node5" class="node">
<title>4</title>
<polygon fill="#f2f2f2" stroke="black" points="1001.79,-42.5 1001.79,-436.1 1516.71,-436.1 1516.71,-42.5 1001.79,-42.5"/>
<text text-anchor="middle" x="1259.25" y="-419.5" font-family="Times,serif" font-size="14.00">RuleWhitelist</text>
<text text-anchor="middle" x="1259.25" y="-402.7" font-family="Times,serif" font-size="14.00">src/rules/RuleWhitelist.sol</text>
<polyline fill="none" stroke="black" points="1001.79,-394.5 1516.71,-394.5 "/>
<text text-anchor="start" x="1009.79" y="-377.9" font-family="Times,serif" font-size="14.00">Private:</text>
<text text-anchor="start" x="1009.79" y="-361.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;numAddressesWhitelisted: uint256</text>
<text text-anchor="start" x="1009.79" y="-344.3" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="1009.79" y="-327.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;whitelist: mapping(address=&gt;bool)</text>
<polyline fill="none" stroke="black" points="1001.79,-319.3 1516.71,-319.3 "/>
<text text-anchor="start" x="1009.79" y="-302.7" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="1009.79" y="-285.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_msgSender(): (sender: address)</text>
<text text-anchor="start" x="1009.79" y="-269.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_msgData(): bytes</text>
<text text-anchor="start" x="1009.79" y="-252.3" font-family="Times,serif" font-size="14.00">External:</text>
<text text-anchor="start" x="1009.79" y="-235.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;numberWhitelistedAddress(): uint256</text>
<text text-anchor="start" x="1009.79" y="-218.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;addressIsWhitelisted(_targetAddress: address): bool</text>
<text text-anchor="start" x="1009.79" y="-201.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;canReturnTransferRestrictionCode(_restrictionCode: uint8): bool</text>
<text text-anchor="start" x="1009.79" y="-185.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;messageForTransferRestriction(_restrictionCode: uint8): string</text>
<text text-anchor="start" x="1009.79" y="-168.3" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="1009.79" y="-151.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;constructor(admin: address, forwarderIrrevocable: address)</text>
<text text-anchor="start" x="1009.79" y="-134.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;addAddressesToTheWhitelist(listWhitelistedAddress: address[]) &lt;&lt;onlyRole&gt;&gt;</text>
<text text-anchor="start" x="1009.79" y="-117.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;removeAddressesFromTheWhitelist(listWhitelistedAddress: address[]) &lt;&lt;onlyRole&gt;&gt;</text>
<text text-anchor="start" x="1009.79" y="-101.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;addAddressToTheWhitelist(_newWhitelistAddress: address) &lt;&lt;onlyRole&gt;&gt;</text>
<text text-anchor="start" x="1009.79" y="-84.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;removeAddressFromTheWhitelist(_removeWhitelistAddress: address) &lt;&lt;onlyRole&gt;&gt;</text>
<text text-anchor="start" x="1009.79" y="-67.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;validateTransfer(_from: address, _to: address, _amount: uint256): (isValid: bool)</text>
<text text-anchor="start" x="1009.79" y="-50.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;detectTransferRestriction(_from: address, _to: address, uint256): uint8</text>
</g>
<!-- 4&#45;&gt;1 -->
<g id="edge5" class="edge">
<title>4&#45;&gt;1</title>
<path fill="none" stroke="black" d="M1051.37,-436.29C1032.25,-451.3 1012.73,-465.63 993.25,-478.6 964.09,-498.02 931.27,-516.04 899.24,-531.87"/>
<polygon fill="none" stroke="black" points="894.53,-522.49 872.02,-544.93 903.61,-541.42 894.53,-522.49"/>
</g>
<!-- 7 -->
<g id="node8" class="node">
<title>7</title>
<polygon fill="#f2f2f2" stroke="black" points="985.7,-515.1 985.7,-682.3 1340.8,-682.3 1340.8,-515.1 985.7,-515.1"/>
<text text-anchor="middle" x="1163.25" y="-665.7" font-family="Times,serif" font-size="14.00">&lt;&lt;Abstract&gt;&gt;</text>
<text text-anchor="middle" x="1163.25" y="-648.9" font-family="Times,serif" font-size="14.00">RuleWhitelistInvariantStorage</text>
<text text-anchor="middle" x="1163.25" y="-632.1" font-family="Times,serif" font-size="14.00">src/rules/abstract/RuleWhitelistInvariantStorage.sol</text>
<polyline fill="none" stroke="black" points="985.7,-623.9 1340.8,-623.9 "/>
<text text-anchor="start" x="993.7" y="-607.3" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="993.7" y="-590.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;WHITELIST_ROLE: bytes32</text>
<text text-anchor="start" x="993.7" y="-573.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;TEXT_ADDRESS_FROM_NOT_WHITELISTED: string</text>
<text text-anchor="start" x="993.7" y="-556.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;TEXT_ADDRESS_TO_NOT_WHITELISTED: string</text>
<text text-anchor="start" x="993.7" y="-540.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;CODE_ADDRESS_FROM_NOT_WHITELISTED: uint8</text>
<text text-anchor="start" x="993.7" y="-523.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;CODE_ADDRESS_TO_NOT_WHITELISTED: uint8</text>
</g>
<!-- 4&#45;&gt;7 -->
<g id="edge6" class="edge">
<title>4&#45;&gt;7</title>
<path fill="none" stroke="black" d="M1206.62,-436.25C1202.09,-453.1 1197.62,-469.73 1193.37,-485.56"/>
<polygon fill="none" stroke="black" points="1183.15,-483.13 1185.51,-514.83 1203.43,-488.58 1183.15,-483.13"/>
</g>
<!-- 5 -->
<g id="node6" class="node">
<title>5</title>
<polygon fill="#f2f2f2" stroke="black" points="595.03,-719.3 595.03,-819.3 901.47,-819.3 901.47,-719.3 595.03,-719.3"/>
<text text-anchor="middle" x="748.25" y="-802.7" font-family="Times,serif" font-size="14.00">&lt;&lt;Abstract&gt;&gt;</text>
<text text-anchor="middle" x="748.25" y="-785.9" font-family="Times,serif" font-size="14.00">RuleCommonInvariantStorage</text>
<text text-anchor="middle" x="748.25" y="-769.1" font-family="Times,serif" font-size="14.00">src/rules/abstract/RuleCommonInvariantStorage.sol</text>
<polyline fill="none" stroke="black" points="595.03,-760.9 901.47,-760.9 "/>
<text text-anchor="start" x="603.03" y="-744.3" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="603.03" y="-727.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;TEXT_CODE_NOT_FOUND: string</text>
</g>
<!-- 6&#45;&gt;5 -->
<g id="edge7" class="edge">
<title>6&#45;&gt;5</title>
<path fill="none" stroke="black" d="M585.95,-682.52C600.35,-690.13 614.79,-697.76 628.78,-705.16"/>
<polygon fill="none" stroke="black" points="624.03,-714.52 655.46,-719.26 633.84,-695.95 624.03,-714.52"/>
</g>
<!-- 7&#45;&gt;5 -->
<g id="edge8" class="edge">
<title>7&#45;&gt;5</title>
<path fill="none" stroke="black" d="M985.45,-671.94C956,-683.9 925.73,-696.2 897.09,-707.83"/>
<polygon fill="none" stroke="black" points="892.92,-698.19 869.08,-719.21 900.82,-717.65 892.92,-698.19"/>
</g>
</g>
</svg>
